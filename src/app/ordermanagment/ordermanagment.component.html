<div class="page-header">
  <h3 class="page-title">
    <span class="page-title-icon bg-info text-white mr-2">
      <i class="mdi mdi-pill"></i>
    </span>
    Order management
  </h3>
  <nav aria-label="breadcrumb">
    <ul class="breadcrumb">
      <li class="breadcrumb-item active" aria-current="page">
        <span></span>Overview
        <i
          class="mdi mdi-alert-circle-outline icon-sm text-primary align-middle"
        ></i>
      </li>
    </ul>
  </nav>
</div>
<!-- <div class="row mb-5">
  <div class="col-md-4 stretch-card grid-margin">
    <div class="card bg-gradient-danger card-img-holder text-white">
      <div class="card-body">
        <img
          src="assets/images/dashboard/circle.svg"
          class="card-img-absolute"
          alt="circle-image"
        />
        <h4 class="font-weight-normal mb-3">
          Total Sales
          <i class="mdi mdi-chart-line mdi-24px float-right"></i>
        </h4>
        <h2 class="mb-5">$ 15,0000</h2>
        <h6 class="card-text">Increased by 60%</h6>
      </div>
    </div>
  </div>
  <div class="col-md-4 stretch-card grid-margin">
    <div class="card bg-gradient-info card-img-holder text-white">
      <div class="card-body">
        <img
          src="assets/images/dashboard/circle.svg"
          class="card-img-absolute"
          alt="circle-image"
        />
        <h4 class="font-weight-normal mb-3">
          Active Orders
          <i class="mdi mdi-bookmark-outline mdi-24px float-right"></i>
        </h4>
        <h2 class="mb-5">45,6334</h2>
        <h6 class="card-text">Decreased by 10%</h6>
      </div>
    </div>
  </div>
  <div class="col-md-4 stretch-card grid-margin">
    <div class="card bg-gradient-success card-img-holder text-white">
      <div class="card-body">
        <img
          src="assets/images/dashboard/circle.svg"
          class="card-img-absolute"
          alt="circle-image"
        />
        <h4 class="font-weight-normal mb-3">
          Pending deliveries
          <i class="mdi mdi-diamond mdi-24px float-right"></i>
        </h4>
        <h2 class="mb-5">95,5741</h2>
        <h6 class="card-text">Increased by 5%</h6>
      </div>
    </div>
  </div>
</div> -->
<!-- Modal Starts -->

<ng-template class="modal fade modal-lg" #exampleModalContent let-modal>
  <div class="modal-content">
    <div class="modal-header">
      <h3 class="modal-title" id="exampleModalLabel">Order Detail</h3>
      <button
        type="button"
        class="close"
        data-dismiss="modal"
        aria-label="Close"
        (click)="modal.dismiss()"
      >
        <span aria-hidden="true">&times;</span>
      </button>
    </div>
    <div class="modal-body">
      <!-- <p>Modal body text goes here </p> -->
      <form class="pt-0">
        <div class="row">
          <div class="col-12 grid-margin">
            <div class="row parent">
              <div
                class="form-group card"
                style="
                  padding-top: 0%;
                  padding-bottom: 0%;
                  width: 46%;
                  height: 300px;
                "
              >
                <div class="text-center mt-3">
                  <label
                    style="color: #198ae3; font-size: 24px; font-weight: bold"
                  >
                    Order #{{
                      this.currentCart.uniqueOrderNumber.slice(0, 7)
                    }} </label
                  ><br />
                  <label
                    style="color: #ffffff; font-size: 18px"
                    class="badge badge-success badge-pill mt-4"
                  >
                    {{ this.currentCart.orderStatus }} </label
                  ><br />
                  <label style="color: #000000; font-size: 18px" class="mt-4">
                    <i
                      class="mdi mdi-calendar-blank"
                      style="color: #000000; font-size: 18px"
                    ></i>
                    {{ this.currentCart.orderDate.slice(0, 10) }} </label
                  ><br />
                  <label style="color: #000000; font-size: 18px" class="mt-4">
                    <i
                      class="mdi mdi mdi-clock"
                      style="color: #000000; font-size: 18px"
                    ></i>
                    {{ this.currentCart.orderDate.slice(12) }} </label
                  ><br />

                  <button type="button" class="btn btn-danger btn-rounded mt-4">
                    <i class="mdi mdi-printer"></i> Download Order Slip
                  </button>
                </div>
              </div>
              <div
                class="form-group card"
                style="
                  padding-top: 0%;
                  padding-bottom: 0%;
                  width: 46%;
                  height: 300px;
                "
              >
                <div class="imgcenter">
                  <label class="hoverable" for="fileInput">
                    <img
                      class="img"
                      [src]="url ? url : 'assets/images/faces/user-icon.png'"
                    />
                    <div class="hover-text">Upload image</div>
                    <div class="background"></div>
                  </label>
                  <br />
                  <input
                    id="fileInput"
                    type="file"
                    (change)="onSelectFile($event)"
                  />
                </div>

                <div
                  class="text-center mt-0"
                  style="transform: translate(0px, -12px)"
                >
                  <label
                    style="color: #000000; font-size: 18px; font-weight: bold"
                  >
                    {{ this.currentCheckout.first_name }} </label
                  ><br />
                  <label
                    style="color: #000000; font-size: 14px; margin-top: 2%"
                  >
                    {{ this.currentCheckout.email_address }} </label
                  ><br />
                  <label
                    style="color: #000000; font-size: 14px; margin-top: 2%"
                  >
                    {{ this.currentCheckout.mobile }} </label
                  ><br />
                  <button type="button" class="btn btn-info btn-rounded mt-3">
                    <i class="mdi mdi-comment-account"></i> Message
                  </button>
                </div>
              </div>
            </div>
          </div>
        </div>
        <!-- <label class="badge badge-info badge-pill"> <i class=" mdi mdi-account "
                                            style="color: #ffffff;font-size: 16px;"></i>
                                        David Grey
                                    </label><br>
                                    <label class="mt-3 badge badge-info badge-pill "> <i class=" mdi mdi-email pr-1 "
                                            style="color: #ffffff;font-size: 16px;"></i>DavidGrey@gmail.com
                                    </label><br>
                                    <label class="mt-3 badge badge-info badge-pill"><i class=" mdi mdi-phone "
                                            style="color: #ffffff;font-size: 16px;"></i> 0009-1233477
                                    </label> -->
        <!-- <div class="row ">
                        <div class="form-group col-lg-3 ">
                            <label class="hoverable" for="fileInput">
                                <img class="img1 " [src]="url ? url : 'https://www.w3schools.com/howto/img_avatar.png'">
                                <div class="hover-text">Upload image</div>
                                <div class="background"></div>
                            </label>
                            <br />
                            <input id="fileInput" type='file' (change)="onSelectFile($event)">
                          
                        </div>

                        <div class="col-lg-6 mt-3">
                            <label class="badge badge-info badge-pill"> <i class=" mdi mdi-account "
                                    style="color: #ffffff;font-size: 16px;"></i>
                                David Grey
                            </label><br>
                            <label class="mt-3 badge badge-info badge-pill "> <i class=" mdi mdi-email pr-1 "
                                    style="color: #ffffff;font-size: 16px;"></i>DavidGrey@gmail.com
                            </label><br>
                            <label class="mt-3 badge badge-info badge-pill"><i class=" mdi mdi-phone "
                                    style="color: #ffffff;font-size: 16px;"></i> 0009-1233477
                            </label>
                        </div>
                    </div> -->

        <div class="row">
          <div class="col-12 grid-margin">
            <div class="card">
              <div class="card-body">
                <!-- <h4 class="card-title">Order Detail</h4> -->
                <div class="table-responsive">
                  <table class="table">
                    <thead>
                      <tr>
                        <!-- <th>Produt image</th> -->
                        <th>Product Name</th>
                        <th>Product Pack</th>
                        <th>Quantity</th>
                        <th>Amount</th>
                        <th>Payment type</th>
                      </tr>
                    </thead>
                    <tbody>
                      <tr *ngFor="let cartItems of this.currentCart.items">
                        <!-- <td>
                          <img
                            src="assets/images/faces/panadol.jpg"
                            class="mr-2"
                            alt="image"
                          />
                        </td> -->
                        <td>{{ cartItems.productName }}</td>
                        <td>{{ cartItems.pillType.quantity }} Pills Pack</td>
                        <td>{{ cartItems.quantity }}</td>
                        <td>${{ cartItems.quantity * cartItems.price }}</td>
                        <td style="padding-left: 4%">
                          <img
                            src="https://img.icons8.com/color/48/000000/visa.png"
                          />
                        </td>
                      </tr>
                    </tbody>
                  </table>
                </div>
              </div>
            </div>
            <div class="row">
              <div class="col-12 grid-margin">
                <div class="row">
                  <div
                    class="form-group col-lg-6 mr-0"
                    style="padding-top: 10%; padding-bottom: 10%"
                  >
                    <ngb-accordion
                      [closeOthers]="true"
                      activeIds="collapse-8"
                      class="accordion-filled"
                    >
                      <ngb-panel
                        id="collapse-7"
                        [title]="'Total Amount $ ' + calculateTotalBill()"
                      >
                        <ng-template ngbPanelContent>
                          <!-- mdi mdi-credit-card -->
                          Tax ({{ taxPercent * 100 }}%) :
                          {{ (calculateTotalBill() * taxPercent).toFixed(2) }}
                          <br />
                          Delivery charges : $ {{ deliverCharges }}
                        </ng-template>
                      </ngb-panel>
                    </ngb-accordion>
                  </div>
                  <div class="form-group col-lg-6 mt-3 ml-0">
                    <div class="row">
                      <button
                        type="button"
                        class="btn btn-light btn-rounded ml-5"
                        data-dismiss="modal"
                        (click)="modal.close()"
                      >
                        Cancel
                      </button>
                      <button
                        type="button"
                        class="btn btn-info btn-rounded ml-0"
                        (click)="modal.close()"
                      >
                        Save
                      </button>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </form>
    </div>
  </div>
</ng-template>
<!-- Modal Ends -->

<div class="row">
  <div class="col-12 grid-margin">
    <div class="card">
      <div class="card-body">
        <h4 class="card-title">Orders</h4>
        <div class="table-responsive">
          <table class="table">
            <thead>
              <tr>
                <th class="line_height">Customers</th>
                <th class="line_height">Tracking ID</th>
                <th class="line_height">Order recieved</th>
                <th class="line_height">payment type</th>
                <th class="line_height">Cart Items</th>
                <th class="line_height">Order status</th>
                <th class="line_height">Detail</th>
              </tr>
            </thead>
            <tbody>
              <tr
                *ngFor="
                  let cart of this._CartService.allCartsData;
                  let i = index
                "
              >
                <td>
                  <!-- <img
                    [src]="'assets/images/faces/' + checkout.imageURL"
                    class="mr-2"
                  /> -->
                  {{ this._CheckoutService.allCheckoutsData[i].first_name }}
                </td>
                <td>
                  {{ cart.trackingID }}
                </td>
                <td>
                  {{ cart.orderDate.slice(0, 10) }}
                </td>
                <td style="padding-left: 4%">
                  <img
                    [src]="
                      cart.paymentType == 'Bitcoin'
                        ? 'https://img.icons8.com/color/48/000000/bitcoin--v1.png'
                        : cart.paymentType == 'Bank' &&
                          cart.creditCardType == 'MasterCard'
                        ? 'https://img.icons8.com/color/48/000000/mastercard.png'
                        : cart.paymentType == 'Bank' &&
                          cart.creditCardType == 'VISA'
                        ? 'https://img.icons8.com/color/48/000000/visa.png'
                        : 'https://img.icons8.com/color/48/000000/delivery--v1.png'
                    "
                  />
                </td>
                <td>
                  {{ cart.items.length + " Items" }}
                </td>
                <td ngbDropdown>
                  <button
                    class="btn btn-success btn-sm btn-rounded"
                    type="button"
                    id="dropdownMenuButton5"
                    ngbDropdownToggle
                  >
                    {{ cart.orderStatus }}
                  </button>
                  <div ngbDropdownMenu>
                    <button
                      class="dropdown-item"
                      id="Pending"
                      ngbDropdownItem
                      (click)="updateStatus(cart, $event.target.id)"
                    >
                      Pending
                    </button>
                    <button
                      class="dropdown-item"
                      id="In-Progress"
                      ngbDropdownItem
                      (click)="updateStatus(cart, $event.target.id)"
                    >
                      In-progress
                    </button>
                    <button
                      class="dropdown-item"
                      id="On-Hold"
                      ngbDropdownItem
                      (click)="updateStatus(cart, $event.target.id)"
                    >
                      On-hold
                    </button>
                    <button
                      class="dropdown-item"
                      id="Done"
                      ngbDropdownItem
                      (click)="updateStatus(cart, $event.target.id)"
                    >
                      Done
                    </button>
                    <button
                      class="dropdown-item"
                      id="Cancel"
                      ngbDropdownItem
                      (click)="updateStatus(cart, $event.target.id)"
                    >
                      Rejected
                    </button>
                  </div>
                </td>
                <td>
                  <button
                    type="button"
                    class="btn btn-success btn-rounded btn-icon"
                    (click)="openModal(exampleModalContent, cart)"
                  >
                    <i class="mdi mdi-content-paste"></i>
                  </button>
                  <button
                    type="button"
                    class="btn btn-danger btn-rounded btn-icon"
                  >
                    <i class="mdi mdi-delete"></i>
                  </button>
                </td>
              </tr>
            </tbody>
          </table>
          <div>
            <ngb-pagination
              [collectionSize]="40"
              [pageSize]="10"
              [page]="1"
              aria-label="Default pagination"
              class="
                d-flex
                justify-content-end
                pagination-info pagination-rounded
                mt-3
              "
            >
            </ngb-pagination>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css" rel="stylesheet">
<div class="container profile-page">
    <div class="row">
        <div class="col-xl-6 col-lg-7 col-md-12">
            <div class="card profile-header">
                <div class="body">
                    <div class="row">
                        <div class="col-lg-4 col-md-4 col-12">
                            <div class="profile-image float-md-right"> <img
                                    src="https://bootdey.com/img/Content/avatar/avatar7.png" alt=""> </div>
                        </div>
                        <div class="col-lg-8 col-md-8 col-12">
                            <h4 class="m-t-0 m-b-0"><strong>Michael</strong> Deo</h4>
                            <span class="job_post">Ui UX Designer</span>
                            <p>795 Folsom Ave, Suite 600 San Francisco, CADGE 94107</p>
                            <div>
                                <button class="btn btn-primary btn-round">Follow</button>
                                <button class="btn btn-primary btn-round btn-simple">Message</button>
                            </div>
                            <p class="social-icon m-t-5 m-b-0">
                                <a title="Twitter" href="javascript:void(0);"><i class="fa fa-twitter"></i></a>
                                <a title="Facebook" href="javascript:void(0);"><i class="fa fa-facebook"></i></a>
                                <a title="Google-plus" href="javascript:void(0);"><i class="fa fa-twitter"></i></a>
                                <a title="Behance" href="javascript:void(0);"><i class="fa fa-behance"></i></a>
                                <a title="Instagram" href="javascript:void(0);"><i class="fa fa-instagram "></i></a>
                            </p>
                        </div>
                    </div>
                </div>
            </div>
        </div>


    </div>


</div> -->
